<!DOCTYPE html>
<html lang="it_IT">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <!-- Meta Tags -->
    <meta charset="utf-8">
    <!--<meta name="viewport"                content="width=device-width,initial-scale=1.0, maximum-scale=1.0, user-scalable=0">-->
    <meta name="theme-color"             content="#F5F1F1">
    <meta name="msapplication-TileColor" content="#F5F1F1">
    <!-- Preload the fonts -->
    <!-- Preload the two initial images -->
    <link rel="preload" href="assets/images/illustration_1.jpg" as="image">
    <link rel="preload" href="assets/images/illustration_2.jpg" as="image">
    <!-- Page Title -->
    <title>Susanna · Pietro</title>
    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="assets/favicons/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="assets/favicons/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="assets/favicons/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="assets/favicons/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon-precomposed" sizes="60x60" href="assets/favicons/apple-touch-icon-60x60.png" />
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="assets/favicons/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon-precomposed" sizes="76x76" href="assets/favicons/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="assets/favicons/apple-touch-icon-152x152.png" />
    <link rel="icon" type="image/png" href="assets/favicons/favicon-196x196.png" sizes="196x196" />
    <link rel="icon" type="image/png" href="assets/favicons/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/png" href="assets/favicons/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="assets/favicons/favicon-16x16.png" sizes="16x16" />
    <link rel="icon" type="image/png" href="assets/favicons/favicon-128.png" sizes="128x128" />
    <meta name="application-name" content="&nbsp;"/>
    <meta name="msapplication-TileColor" content="#FFFFFF" />
    <meta name="msapplication-TileImage" content="mstile-144x144.png" />
    <meta name="msapplication-square70x70logo" content="mstile-70x70.png" />
    <meta name="msapplication-square150x150logo" content="mstile-150x150.png" />
    <meta name="msapplication-wide310x150logo" content="mstile-310x150.png" />
    <meta name="msapplication-square310x310logo" content="mstile-310x310.png" />

    <!-- Styles -->
    <!-- Font Awesome -->
<link rel="stylesheet" href="assets/vendors/fontawesome.css">
<!-- Bootstrap core CSS -->
<link href="assets/vendors/bootstrap.min.css" rel="stylesheet">
<!-- Material Design Bootstrap -->
<link href="assets/vendors/mdb.min.css" rel="stylesheet">
    <!--<link href="https://fonts.googleapis.com/css?family=Rock+Salt" rel="stylesheet">-->
    <link href="https://fonts.googleapis.com/css?family=Julius+Sans+One|Raleway" rel="stylesheet">
    <link href="assets/css/main.css" rel="stylesheet">
</head>
<body>
    <section class="opening">
        <div class="opening-title">
            Susanna <br>
            &<br>
            Pietro
        </div>
    </section>
    <div class="text">
        <p class="text-big">
            Siamo lieti di invitarti <br> al nostro matrimonio!
        </p>
        <p class="text-xxl date">
          08 · 07 · 2019
        </p>
    </div>
    <figure class="illustration-container">
        <img class="illustration" src="assets/images/illustration_3.jpg">
    </figure>
    <div class="text">
         <p class="text-big">cerimonia<br> ore 17.30</p>
         <p>
             <a href="https://goo.gl/maps/uCGo6wsKNEt" target="_blank">
                Teatro Umberto Giordano - Sala Fedora
            </a>
            <br>
            Piazza Cesare Battisti <br>
            Foggia </p>
    </div>
    <div class="text">
         <p class="text-big">aperitivo · cena · party<br>dalle ore 18.30</p>
         <p><a href="https://goo.gl/maps/m7nps3H79an" target="_blank">Casa Freda</a><br> km 2, Via S. Severo
            <br> Foggia </p>
    </div>
    <div class="text">
        <p class="optional">
            per confermare la tua presenza<br>
             e indicarci eventuali esigenze alimentari,<br> puoi scriverci su whatsapp<br> 
            <b>entro l' 8 Giugno</b>
        </p>
    </div>
    <figure class="illustration-container">
        <img class="illustration" src="assets/images/illustration_4.jpg">
    </figure>
    <div class="text text-travel">
        <p class="optional">
            La vita è un viaggio <br> 
            e chi viaggia vive due volte...<br><br>

            La tua presenza sarà per noi il regalo più bello, <br>
            ma se ti fa piacere puoi contribuire al nostro <br>
            viaggio intorno al mondo <br>
            utilizzando questo riferimento
        </p>
        <p class="">
            <b>Palazzo Pietro e Cervia Susanna <br>
            iban <br>
            IT 42 C 03015 03200 000005904630</b>
        </p>
       <!--<img src="../assets/images/mapBrown.png" id="mapimg">-->
</div>

    </div>
    <figure class="illustration-container illustration-container-small">
        <img class="illustration" src="assets/images/illustration_5.jpg">
    </figure>
    <div class="text">
        <p class="text-big">Il nostro viaggio!</p>
        <div id="map-container-google-1" class="z-depth-1-half map-container" style="height: 500px">
        <div id="chartdiv">
        </div>
    </div>
    <div class="text">
        <p class="text-big">non vediamo l’ora<br> di condividere insieme<br> questo giorno!</p>
    </div>
    <script src="assets/vendors/amcharts4/core.js"></script>
<script src="assets/vendors/amcharts4/maps.js"></script>
<script src="assets/vendors/amcharts4/geodata/worldLow.js"></script>
<script src="assets/vendors/amcharts4/themes/moonrisekingdom.js"></script>
<script src="assets/vendors/amcharts4/themes/animated.js"></script>
<!-- JQuery -->
<script type="text/javascript" src="assets/vendors/jquery.min.js"></script>
<!-- Bootstrap tooltips -->
<script type="text/javascript" src="assets/vendors/popper.min.js"></script>
<!-- Bootstrap core JavaScript -->
<script type="text/javascript" src="assets/vendors/bootstrap.min.js"></script>
<!-- MDB core JavaScript -->
<script type="text/javascript" src="assets/vendors/mdb.min.js"></script>
<script>
// Themes begin
am4core.useTheme(am4themes_moonrisekingdom);
am4core.useTheme(am4themes_animated);
// Themes end

// Create map instance
var chart = am4core.create("chartdiv", am4maps.MapChart);
chart.geodata = am4geodata_worldLow;
chart.projection = new am4maps.projections.Miller();
chart.homeZoomLevel = 0.5;
chart.homeGeoPoint = {
    latitude: 31,
    longitude: 12 
};
chart.seriesContainer.draggable = false;
chart.seriesContainer.resizable = false;
chart.maxZoomLevel = 1;

// Create map polygon series
var polygonSeries = chart.series.push(new am4maps.MapPolygonSeries());
polygonSeries.useGeodata = true;
polygonSeries.mapPolygons.template.fill = chart.colors.getIndex(0).lighten(0.5);
polygonSeries.mapPolygons.template.nonScalingStroke = true;
polygonSeries.exclude = ["AQ"];

// Add line bullets
var cities = chart.series.push(new am4maps.MapImageSeries());
cities.mapImages.template.nonScaling = true;

var city = cities.mapImages.template.createChild(am4core.Circle);
city.radius = 7;
city.fill = chart.colors.getIndex(0).brighten(-0.1);
city.strokeWidth = 4;
city.stroke = am4core.color("#fff");

function addCity(coords, title) {
    var city = cities.mapImages.create();
    city.latitude = coords.latitude;
    city.longitude = coords.longitude;
    city.children.getIndex(0).text = title;
    city.title = title;
    city.label = city.title + " +25%";
    city.tooltipText = title;
    city.keepTargetHover = true;
    city.isHover = true;
    city.isActive = true;

    console.log(city);
    return city;
}

var rome = addCity({ "latitude": 41.90, "longitude": 12.49 }, "Italia");

var kat = addCity({ "latitude": 27.71, "longitude": 85.32 }, "Nepal");
var tokyo = addCity({ "latitude": 35.67, "longitude": 139.65 }, "Giappone");
var lala = addCity({ "latitude": 3.13, "longitude": 101.68 }, "Malesia");
var nz = addCity({ "latitude": -36.84, "longitude": 174.76 }, "Nuova Zelanda");
var isole_cook = addCity({ "latitude": -18.85, "longitude": -159.78 }, "Isole Cook");


// Add lines
var lineSeries = chart.series.push(new am4maps.MapArcSeries());
lineSeries.mapLines.template.line.strokeWidth = 2;
lineSeries.mapLines.template.line.strokeOpacity = 0.5;
lineSeries.mapLines.template.line.stroke = city.fill;
lineSeries.mapLines.template.line.nonScalingStroke = true;
lineSeries.mapLines.template.line.strokeDasharray = "0";
lineSeries.zIndex = 10;

var shadowLineSeries = chart.series.push(new am4maps.MapLineSeries());
shadowLineSeries.mapLines.template.line.strokeOpacity = 0;
shadowLineSeries.mapLines.template.line.nonScalingStroke = true;
shadowLineSeries.mapLines.template.shortestDistance = false;
shadowLineSeries.zIndex = 5;

function addLine(from, to) {
    var line = lineSeries.mapLines.create();
    line.imagesToConnect = [from, to];
    line.line.controlPointDistance = -0.3;

    var shadowLine = shadowLineSeries.mapLines.create();
    shadowLine.imagesToConnect = [from, to];

    return line;
}

addLine(rome, kat);
addLine(kat, tokyo);
addLine(tokyo, lala);
addLine(lala, nz);
addLine(nz, isole_cook);
addLine(isole_cook, rome);

// Add plane
var plane = lineSeries.mapLines.getIndex(0).lineObjects.create();
plane.position = 0;
plane.width = 48;
plane.height = 48;

plane.adapter.add("scale", (scale, target) => {
    return 0.5 * (1 - (Math.abs(0.5 - target.position)));
})

var planeImage = plane.createChild(am4core.Sprite);
planeImage.scale = 0.2;
planeImage.horizontalCenter = "middle";
planeImage.verticalCenter = "middle";
planeImage.path = "m2,106h28l24,30h72l-44,-133h35l80,132h98c21,0 21,34 0,34l-98,0 -80,134h-35l43,-133h-71l-24,30h-28l15,-47";
planeImage.fill = chart.colors.getIndex(2).brighten(-0.2);
planeImage.strokeOpacity = 0;

var shadowPlane = shadowLineSeries.mapLines.getIndex(0).lineObjects.create();
shadowPlane.position = 0;
shadowPlane.width = 48;
shadowPlane.height = 48;

var shadowPlaneImage = shadowPlane.createChild(am4core.Sprite);
shadowPlaneImage.scale = 0.2;
shadowPlaneImage.horizontalCenter = "middle";
shadowPlaneImage.verticalCenter = "middle";
shadowPlaneImage.path = "m2,106h28l24,30h72l-44,-133h35l80,132h98c21,0 21,34 0,34l-98,0 -80,134h-35l43,-133h-71l-24,30h-28l15,-47";
shadowPlaneImage.fill = am4core.color("#000");
shadowPlaneImage.strokeOpacity = 0;

shadowPlane.adapter.add("scale", (scale, target) => {
    target.opacity = (0.6 - (Math.abs(0.5 - target.position)));
    return 0.5 - 0.3 * (1 - (Math.abs(0.5 - target.position)));
})

// Plane animation
var currentLine = 0;
var direction = 1;
function flyPlane() {

    // Get current line to attach plane to
    plane.mapLine = lineSeries.mapLines.getIndex(currentLine);
    plane.parent = lineSeries;
    shadowPlane.mapLine = shadowLineSeries.mapLines.getIndex(currentLine);
    shadowPlane.parent = shadowLineSeries;
    shadowPlaneImage.rotation = planeImage.rotation;

    // Set up animation
    var from, to;
    var numLines = lineSeries.mapLines.length;
    if (direction == 1) {
        from = 0
        to = 1;
        if (planeImage.rotation != 0) {
            planeImage.animate({ to: 0, property: "rotation" }, 1000).events.on("animationended", flyPlane);
            return;
        }
    }
    else {
        from = 1;
        to = 0;
        if (planeImage.rotation != 180) {
            planeImage.animate({ to: 180, property: "rotation" }, 1000).events.on("animationended", flyPlane);
            return;
        }
    }

    // Start the animation
    var animation = plane.animate({
        from: from,
        to: to,
        property: "position"
    }, 5000, am4core.ease.sinInOut);
    animation.events.on("animationended", flyPlane)
    /*animation.events.on("animationprogress", function(ev) {
      var progress = Math.abs(ev.progress - 0.5);
      //console.log(progress);
      //planeImage.scale += 0.2;
    });*/

    shadowPlane.animate({
        from: from,
        to: to,
        property: "position"
    }, 5000, am4core.ease.sinInOut);

    // Increment line, or reverse the direction
    currentLine += direction;
    if (currentLine < 0) {
        currentLine = 0;
        direction = 1;
    }
    else if ((currentLine + 1) > numLines) {
        currentLine = 0;//numLines - 1;
        direction = 1;
    }

}

// Go!
flyPlane();
</script>
</body>
</html>
